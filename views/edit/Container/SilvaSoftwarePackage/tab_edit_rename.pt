<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    global vein string:rename;
    global active_tab string:tab_edit;
    "
  i18n:domain="silva">
<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main"
  tal:define="objects view/REQUEST/ids">

<tal:condition condition="python:view.REQUEST.has_key('ids')">
<div class="focus-rectangle"
  style="padding-top:0;">
  <form action="tab_edit_rename_submit" method="POST">
    <table class="listing">
      <thead>
        <tr>
          <td class="top"
            colspan="3">
            <h2>
              <img tal:replace="structure python:view.render_icon(model)" />
              <span i18n:translate="rename_objects_in">rename objects in</span>       
              &#xab;<tal:block content="title" />&#xbb;
            </h2>
          </td>
        </tr>
      </thead>

      <tbody>
        <tr>
          <th class="align-right" i18n:translate="attribute">
            attribute
          </th>
          <th i18n:translate="old">
            old
          </th>
          <th width="66%"
            i18n:translate="new">
            new
          </th>
        </tr>

        <tal:repeat repeat="objectid objects">
        <tal:define define="object python:getattr(model, objectid)">
        <tr class="odd" valign="top">
          <td class="align-right" i18n:translate="id" 
                tal:content="python: object.meta_type == 'Silva Software Release' and 'version' or 'id'">
            id
          </td>
          <td>
            <span 
              tal:define="
                objId object/getId"
              tal:replace="
                python: mangle.String.centeredTruncate(objId, 30)" />
              &nbsp;
          </td>
          <td>
            <input type="text" name="name" style="width: 100%" value="value"
              tal:attributes="name string:id_${object/getId}; value object/getId" />
          </td>
          </tr>

          <tr class="even" valign="top" tal:condition="python: object.meta_type != 'Silva Software Release'">
          <td class="align-right" i18n:translate="title">
            title
          </td>
          <td tal:define="
                title python: object.get_title_editable()" >
            <i tal:condition="not: title">no title</i> 
            <span 
              tal:condition="title"
              tal:content="
                python: mangle.String.centeredTruncate(title, 30)"
              tal:attributes="
                title title"
            />
          </td>
          <td tal:define="
                title object/get_title_editable | object/get_title;
                is_title_editable object/can_set_title;
          ">
            <input
              type="text"
              name="name"
              style="width: 100%"
              value="value"
              tal:condition="is_title_editable"
              tal:attributes="
                name string:title_${object/getId}; 
                value title;
                " 
            />
              <tal:block 
                content="title"
                condition="not: is_title_editable" 
              />
          </td>
        </tr>
        <tr class="divider"
          tal:condition="not: repeat/objectid/end">
          <td colspan="5">
          </td>
        </tr>
        </tal:define>
        </tal:repeat>
      </tbody>

      <tfoot>
        <tr class="controls">
          <td colspan="3">
            <input class="button"
              style="float:right;"
              type="submit"
              value="rename"
              title="access key: alt-r"
              accesskey="r"
            />
            <input class="cancel"
              type="button"
              name="edit_cancel"
              value="cancel"
              onClick="history.back()" title="access key: alt-c" accesskey="c"
            />
          </td>
        </tr>
      </tfoot>
    </table>
  </form>
</div>
</tal:condition>

</metal:block>
</metal:block>
</html>
