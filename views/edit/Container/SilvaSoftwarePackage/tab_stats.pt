<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="vein string:contents;
              view here;
              request view/REQUEST;
              model request/model;
              icon python:view.render_icon(model);
              paths model/get_software_file_paths;
              records python: view.records_for_files(paths);
              max python: view.max_hits(records)
              "
  i18n:domain="silva">

<metal:block use-macro="here/macro_index/macros/master">
<metal:block fill-slot="main" tal:omit-tag="">

<table class="columns columns2">
  <tbody>
    <tr>
      <tal:block replace="nothing">
        _____________________ sidebar _____________________
      </tal:block>
      <td class="left"
        tal:define="template_id string:tab_edit">
        <metal:block use-macro="view/macro_vein_navigation/macros/vein">
          <metal:fill-slot fill-slot="sidebar">
            <tal:block replace="structure python: view.service_sidebar.render(model, 'tab_edit', vein)" />
          </metal:fill-slot>
        </metal:block>
      </td>

      <tal:block replace="nothing">
        _____________________ main _____________________
      </tal:block>
      <td class="main">

        <form method="POST" name="form" action=".">
          <table class="listing">
            <thead
              tal:define="meta_type model/meta_type">
              <tal:block replace="nothing">
                ______________ vein + title row ______________
              </tal:block>
              <tr>
                <td class="top"
                  colspan="3">
                  <h2>
                    <img tal:replace="structure icon" />
                    <span style="text-transform:lowercase;"
                      tal:content="meta_type">meta type</span> 
                    &#xab;<tal:block content="model/get_title_or_id" />&#xbb;
                  </h2>
                </td>
              </tr>
              <tal:block replace="nothing">
                ______________ top controls row ______________
              </tal:block>
              <tr class="top-controls">
                <td colspan="3">
                  <h3>
                    Statistics
                  </h3>
                </td>
              </tr>
            </thead>

            <tbody>
              <tr>
                <th width="12%"
                  i18n:translate="element">
                  path
                </th>
                <th width="12%"
                  i18n:translate="content">
                  hits
                </th>
                <th i18n:translate="graphical">
                  graphical
                </th>
              </tr>

              <tr tal:repeat="pathrecord records">
                <tal:block define="path python: pathrecord[0];
                                    record python:pathrecord[1];">
                  <td>
                    <a tal:content="path" 
                        tal:attributes="href python: ('%s/edit/tab_stats' 
                          % model.restrictedTraverse(
                              path.split('/')
                            ).absolute_url())">path</a>
                  </td>
                  <td tal:content="python: record.get('total', 0)">1</td>
                  <td>
                    <tal:block condition="python: max > 0">
                      <div tal:attributes="style python: (
                            'background-color: #229966;;'
                            'margin: 2px;;'
                            'width: %s%%;;') % (
                              float(record.get('total', 0)) / max * 100)">
                        &nbsp;
                      </div>
                    </tal:block>
                    <tal:block condition="python: max <= 0">
                      &nbsp;
                    </tal:block>
                  </td>
                </tal:block>
              </tr>

            </tbody>

            <tfoot>
              <tr class="controls">
                <td class="align-right"
                  colspan="3">
                  <input class="button"
                    type="submit"
                    name="submit:method"
                    value="save"
                    title="access key: alt-s"
                    accesskey="s"
                    i18n:attributes="title value"
                  />
                </td>
              </tr>
            </tfoot>
          </table>
        </form>

      </td>
    </tr>
  </tbody>
</table>
</metal:block>
</metal:block>

</html>

