"undefined"==typeof RGraph&&(RGraph={}),RGraph.Line=function(canvas){this.canvas=canvas,this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,this.canvas.__object__=this,this.type="line",this.max=0,this.coords=[],this.coords2=[],this.coords.key=[],this.coordsText=[],this.hasnegativevalues=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,RGraph.OldBrowserCompat(this.context),this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":1,"chart.background.grid.width":1,"chart.background.grid.hsize":25,"chart.background.grid.vsize":25,"chart.background.grid.color":"#ddd","chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.align":!1,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.hbars":null,"chart.background.image":null,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.size":8,"chart.xtickgap":20,"chart.smallxticks":3,"chart.largexticks":5,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":10,"chart.linewidth":1.01,"chart.colors":["red","#0f0","#00f","#f0f","#ff0","#0ff"],"chart.hmargin":0,"chart.tickmarks.dot.color":"white","chart.tickmarks":null,"chart.tickmarks.linewidth":null,"chart.ticksize":3,"chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.tickdirection":-1,"chart.yaxispoints":5,"chart.fillstyle":null,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.xticks":null,"chart.text.size":10,"chart.text.angle":0,"chart.text.color":"black","chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.font":null,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.shadow":!1,"chart.shadow.offsetx":2,"chart.shadow.offsety":2,"chart.shadow.blur":3,"chart.shadow.color":"rgba(0,0,0,0.5)","chart.tooltips":null,"chart.tooltips.hotspot.xonly":!1,"chart.tooltips.hotspot.size":5,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onmousemove","chart.tooltips.highlight":!0,"chart.tooltips.coords.page":!1,"chart.highlight.stroke":"gray","chart.highlight.fill":"white","chart.stepped":!1,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.halign":null,"chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!0,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.interactive":!1,"chart.contextmenu":null,"chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.scale.invert":!1,"chart.xlabels.inside":!1,"chart.xlabels.inside.color":"rgba(255,255,255,0.5)","chart.noaxes":!1,"chart.noyaxis":!1,"chart.noxaxis":!1,"chart.noendxtick":!1,"chart.noendytick":!1,"chart.units.post":"","chart.units.pre":"","chart.scale.decimals":null,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.annotatable":!1,"chart.annotate.color":"black","chart.axesontop":!1,"chart.filled":!1,"chart.filled.range":!1,"chart.filled.accumulative":!0,"chart.variant":null,"chart.axis.color":"black","chart.axis.linewidth":1,"chart.numxticks":arguments[1]&&"number"==typeof arguments[1][0]?arguments[1].length:20,"chart.numyticks":10,"chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.zoom.action":"zoom","chart.backdrop":!1,"chart.backdrop.size":30,"chart.backdrop.alpha":.2,"chart.resizable":!1,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noredraw":!1,"chart.outofbounds":!1,"chart.chromefix":!0,"chart.animation.factor":1,"chart.animation.unfold.x":!1,"chart.animation.unfold.y":!0,"chart.animation.unfold.initial":2,"chart.animation.trace.clip":1,"chart.curvy":!1,"chart.line.visible":!0,"chart.events.click":null,"chart.events.mousemove":null};for(var i=1;arguments.length>i;++i)"null"!=typeof arguments[i]&&arguments[i]||(arguments[i]=[]);this.original_data=[];for(var i=1;arguments.length>i;++i)if(arguments[1]&&"object"==typeof arguments[1]&&arguments[1][0]&&"object"==typeof arguments[1][0]&&arguments[1][0].length){for(var tmp=[],i=0;arguments[1].length>i;++i)tmp[i]=RGraph.array_clone(arguments[1][i]);for(var j=0;tmp.length>j;++j)this.original_data[j]=RGraph.array_clone(tmp[j])}else this.original_data[i-1]=RGraph.array_clone(arguments[i]);if(!this.canvas)return alert("[LINE] Fatal error: no canvas support"),void 0;this.data_arr=RGraph.array_linearize(this.original_data);for(var i=0;this.data_arr.length>i;++i)this["$"+i]={};this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),RGraph.Register(this)},RGraph.Line.prototype.Set=function(name,value){if(name=name.toLowerCase(),"chart."!=name.substr(0,6)&&(name="chart."+name),"chart.tooltips"==name&&"object"==typeof value&&value){for(var tooltips=[],i=1;arguments.length>i;i++)if("object"==typeof arguments[i]&&arguments[i][0])for(var j=0;arguments[i].length>j;j++)tooltips.push(arguments[i][j]);else"function"==typeof arguments[i]?tooltips=arguments[i]:tooltips.push(arguments[i]);value=tooltips}if("chart.linewidth"==name&&navigator.userAgent.match(/Chrome/))if(1==value)value=1.01;else if(RGraph.is_array(value))for(var i=0;value.length>i;++i)"number"==typeof value[i]&&1==value[i]&&(value[i]=1.01);return"chart.xaxispos"==name&&"bottom"!=value&&"center"!=value&&"top"!=value&&(alert("[LINE] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+value+" Changing it to center"),value="center"),"chart.xticks"==name&&(name="chart.numxticks"),"chart.spline"==name&&(name="chart.curvy"),"chart.ylabels.invert"==name&&(name="chart.scale.invert"),this.properties[name]=value,this},RGraph.Line.prototype.Get=function(name){return"chart."!=name.substr(0,6)&&(name="chart."+name),this.properties[name]},RGraph.Line.prototype.Draw=function(){var ca=this.canvas,co=this.context,prop=this.properties;if("string"==typeof this.properties["chart.background.image"]&&RGraph.DrawBackgroundImage(this),RGraph.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=prop["chart.gutter.left"],this.gutterRight=prop["chart.gutter.right"],this.gutterTop=prop["chart.gutter.top"],this.gutterBottom=prop["chart.gutter.bottom"],this.properties["chart.shadow"]&&navigator.userAgent.match(/Chrome/)&&1>=prop["chart.linewidth"]&&prop["chart.chromefix"]&&prop["chart.shadow.blur"]>0&&alert("[RGRAPH WARNING] Chrome has a shadow bug, meaning you should increase the linewidth to at least 1.01"),this.data=RGraph.array_clone(this.original_data),this.max=0,prop["chart.filled"]&&!prop["chart.filled.range"]&&this.data.length>1&&prop["chart.filled.accumulative"])for(var accumulation=[],set=0;this.data.length>set;++set)for(var point=0;this.data[set].length>point;++point)this.data[set][point]=Number(accumulation[point]?accumulation[point]:0)+this.data[set][point],accumulation[point]=this.data[set][point];if(prop["chart.ymax"]){if(this.max=prop["chart.ymax"],this.min=prop["chart.ymin"]?prop["chart.ymin"]:0,this.scale2=RGraph.getScale2(this,{max:this.max,min:prop["chart.ymin"],strict:!0,"scale.thousand":prop["chart.scale.thousand"],"scale.point":prop["chart.scale.point"],"scale.decimals":prop["chart.scale.decimals"],"ylabels.count":prop["chart.ylabels.count"],"scale.round":prop["chart.scale.round"],"units.pre":prop["chart.units.pre"],"units.post":prop["chart.units.post"]}),this.max=this.scale2.max?this.scale2.max:0,!this.properties["chart.outofbounds"])for(dataset=0;this.data.length>dataset;++dataset)for(var datapoint=0;this.data[dataset].length>datapoint;datapoint++)this.hasnegativevalues=0>this.data[dataset][datapoint]||this.hasnegativevalues}else{for(this.min=prop["chart.ymin"]?prop["chart.ymin"]:0,dataset=0;this.data.length>dataset;++dataset)for(var datapoint=0;this.data[dataset].length>datapoint;datapoint++)this.max=Math.max(this.max,this.data[dataset][datapoint]?Math.abs(parseFloat(this.data[dataset][datapoint])):0),prop["chart.outofbounds"]||(this.hasnegativevalues=0>this.data[dataset][datapoint]||this.hasnegativevalues);this.scale2=RGraph.getScale2(this,{max:this.max,min:prop["chart.ymin"],"scale.thousand":prop["chart.scale.thousand"],"scale.point":prop["chart.scale.point"],"scale.decimals":prop["chart.scale.decimals"],"ylabels.count":prop["chart.ylabels.count"],"scale.round":prop["chart.scale.round"],"units.pre":prop["chart.units.pre"],"units.post":prop["chart.units.post"]}),this.max=this.scale2.max?this.scale2.max:0}this.properties["chart.contextmenu"]&&RGraph.ShowContext(this),this.coords=[],this.coordsText=[],this.grapharea=this.canvas.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=this.properties["chart.text.size"]/2,"bottom"==this.properties["chart.xaxispos"]&&this.hasnegativevalues&&-1==navigator.userAgent.indexOf("Opera")&&alert("[LINE] You have negative values and the X axis is at the bottom. This is not good..."),"3d"==this.properties["chart.variant"]&&RGraph.Draw3DAxes(this),RGraph.background.Draw(this),this.properties["chart.background.hbars"]&&this.properties["chart.background.hbars"].length>0&&RGraph.DrawBars(this),0==this.properties["chart.axesontop"]&&this.DrawAxes(),co.save(),co.beginPath(),co.rect(0,0,ca.width*prop["chart.animation.trace.clip"],ca.height),co.clip();for(var i=0,j=0;this.data.length>i;i++,j++){if(co.beginPath(),prop["chart.filled"]||this.SetShadow(i),prop["chart.fillstyle"]){if("object"==typeof prop["chart.fillstyle"]&&prop["chart.fillstyle"][j])var fill=prop["chart.fillstyle"][j];else if("object"==typeof prop["chart.fillstyle"]&&(""+prop["chart.fillstyle"]).indexOf("Gradient")>0)var fill=prop["chart.fillstyle"];else if("string"==typeof prop["chart.fillstyle"])var fill=prop["chart.fillstyle"]}else if(prop["chart.filled"])var fill=prop["chart.colors"][j];else var fill=null;if(prop["chart.tickmarks"]&&"object"==typeof prop["chart.tickmarks"])var tickmarks=prop["chart.tickmarks"][i];else if(prop["chart.tickmarks"]&&"string"==typeof prop["chart.tickmarks"])var tickmarks=prop["chart.tickmarks"];else if(prop["chart.tickmarks"]&&"function"==typeof prop["chart.tickmarks"])var tickmarks=prop["chart.tickmarks"];else var tickmarks=null;this.DrawLine(this.data[i],prop["chart.colors"][j],fill,this.GetLineWidth(j),tickmarks,i),this.context.stroke()}if(prop["chart.filled"]&&prop["chart.filled.accumulative"]&&!prop["chart.curvy"]){for(var i=0;this.coords2.length>i;++i){co.beginPath(),co.lineWidth=this.GetLineWidth(i),co.strokeStyle=prop["chart.colors"][i];for(var j=0;this.coords2[i].length>j;++j)0==j||null==this.coords2[i][j][1]||this.coords2[i][j-1]&&null==this.coords2[i][j-1][1]?this.context.moveTo(this.coords2[i][j][0],this.coords2[i][j][1]):(prop["chart.stepped"]&&co.lineTo(this.coords2[i][j][0],this.coords2[i][j-1][1]),co.lineTo(this.coords2[i][j][0],this.coords2[i][j][1]));this.context.stroke()}if(prop["chart.tickmarks"]){co.beginPath(),co.fillStyle="white";for(var i=0;this.coords2.length>i;++i){co.beginPath(),co.strokeStyle=prop["chart.colors"][i];for(var j=0;this.coords2[i].length>j;++j)if("object"==typeof this.coords2[i][j]&&"number"==typeof this.coords2[i][j][0]&&"number"==typeof this.coords2[i][j][1]){var tickmarks="object"==typeof prop["chart.tickmarks"]?prop["chart.tickmarks"][i]:prop["chart.tickmarks"];this.DrawTick(this.coords2[i],this.coords2[i][j][0],this.coords2[i][j][1],co.strokeStyle,!1,0==j?0:this.coords2[i][j-1][0],0==j?0:this.coords2[i][j-1][1],tickmarks,j)}}co.stroke(),co.fill()}}if(co.restore(),co.beginPath(),prop["chart.axesontop"]&&this.DrawAxes(),this.DrawLabels(),this.DrawRange(),prop["chart.key"]&&prop["chart.key"].length&&RGraph.DrawKey&&RGraph.DrawKey(this,prop["chart.key"],prop["chart.colors"]),prop["chart.labels.above"]&&this.DrawAboveLabels(),RGraph.DrawInGraphLabels(this),prop["chart.filled"]&&prop["chart.filled.range"]&&2==this.data.length){co.beginPath();var len=this.coords.length/2;co.lineWidth=prop["chart.linewidth"],co.strokeStyle=prop["chart.colors"][0];for(var i=0;len>i;++i)0==i?co.moveTo(this.coords[i][0],this.coords[i][1]):co.lineTo(this.coords[i][0],this.coords[i][1]);co.stroke(),co.beginPath(),prop["chart.colors"][1]&&(co.strokeStyle=prop["chart.colors"][1]);for(var i=this.coords.length-1;i>=len;--i)i==this.coords.length-1?co.moveTo(this.coords[i][0],this.coords[i][1]):co.lineTo(this.coords[i][0],this.coords[i][1]);co.stroke()}else prop["chart.filled"]&&prop["chart.filled.range"]&&alert("[LINE] You must have only two sets of data for a filled range chart");return prop["chart.resizable"]&&RGraph.AllowResizing(this),RGraph.InstallEventListeners(this),RGraph.FireCustomEvent(this,"ondraw"),this},RGraph.Line.prototype.DrawAxes=function(){if(!this.properties["chart.noaxes"]){if(RGraph.NoShadow(this),this.context.lineWidth=this.properties["chart.axis.linewidth"]+.001,this.context.lineCap="butt",this.context.strokeStyle=this.properties["chart.axis.color"],this.context.beginPath(),0==this.properties["chart.noxaxis"]&&("center"==this.properties["chart.xaxispos"]?(this.context.moveTo(this.gutterLeft,Math.round(this.grapharea/2+this.gutterTop)),this.context.lineTo(this.canvas.width-this.gutterRight,Math.round(this.grapharea/2+this.gutterTop))):"top"==this.properties["chart.xaxispos"]?(this.context.moveTo(this.gutterLeft,this.gutterTop),this.context.lineTo(this.canvas.width-this.gutterRight,this.gutterTop)):(this.context.moveTo(this.gutterLeft,this.canvas.height-this.gutterBottom),this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom))),0==this.properties["chart.noyaxis"]&&("left"==this.properties["chart.yaxispos"]?(this.context.moveTo(this.gutterLeft,this.gutterTop),this.context.lineTo(this.gutterLeft,this.canvas.height-this.gutterBottom)):(this.context.moveTo(this.canvas.width-this.gutterRight,this.gutterTop),this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom))),0==this.properties["chart.noxaxis"]&&this.properties["chart.numxticks"]>0){var xTickInterval=(this.canvas.width-this.gutterLeft-this.gutterRight)/this.properties["chart.numxticks"];for((!xTickInterval||0>=xTickInterval)&&(xTickInterval=(this.canvas.width-this.gutterLeft-this.gutterRight)/(this.properties["chart.labels"]&&this.properties["chart.labels"].length?this.properties["chart.labels"].length-1:10)),x=this.gutterLeft+("left"==this.properties["chart.yaxispos"]?xTickInterval:0);this.canvas.width-this.gutterRight+1>=x&&!("right"==this.properties["chart.yaxispos"]&&x>=this.canvas.width-this.gutterRight-1);x+=xTickInterval){if(this.properties["chart.noendxtick"]){if("left"==this.properties["chart.yaxispos"]&&x>=this.canvas.width-this.gutterRight-1)break;if("right"==this.properties["chart.yaxispos"]&&x==this.gutterLeft)continue}var yStart="center"==this.properties["chart.xaxispos"]?this.gutterTop+this.grapharea/2-3:this.canvas.height-this.gutterBottom,yEnd="center"==this.properties["chart.xaxispos"]?yStart+6:this.canvas.height-this.gutterBottom-(0==x%60?this.properties["chart.largexticks"]*this.properties["chart.tickdirection"]:this.properties["chart.smallxticks"]*this.properties["chart.tickdirection"]);if("center"==this.properties["chart.xaxispos"])var yStart=Math.round(this.gutterTop+this.grapharea/2)-3,yEnd=yStart+6;else if("bottom"==this.properties["chart.xaxispos"]){var yStart=this.canvas.height-this.gutterBottom,yEnd=this.canvas.height-this.gutterBottom-(0==x%60?this.properties["chart.largexticks"]*this.properties["chart.tickdirection"]:this.properties["chart.smallxticks"]*this.properties["chart.tickdirection"]);yEnd+=0}else"top"==this.properties["chart.xaxispos"]&&(yStart=this.gutterTop-3,yEnd=this.gutterTop);this.context.moveTo(Math.round(x),yStart),this.context.lineTo(Math.round(x),yEnd)}}else 0==this.properties["chart.noyaxis"]&&this.properties["chart.numyticks"]>0&&(this.properties["chart.noendytick"]||("left"==this.properties["chart.yaxispos"]?(this.context.moveTo(this.gutterLeft,Math.round(this.canvas.height-this.gutterBottom)),this.context.lineTo(this.gutterLeft-this.properties["chart.smallyticks"],Math.round(this.canvas.height-this.gutterBottom))):(this.context.moveTo(this.canvas.width-this.gutterRight,Math.round(this.canvas.height-this.gutterBottom)),this.context.lineTo(this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"],Math.round(this.canvas.height-this.gutterBottom)))));var numyticks=this.properties["chart.numyticks"];if(0==this.properties["chart.noyaxis"]&&numyticks>0){var counter=0,adjustment=0;if("right"==this.properties["chart.yaxispos"]&&(adjustment=this.canvas.width-this.gutterLeft-this.gutterRight),"center"==this.properties["chart.xaxispos"]){var interval=this.grapharea/numyticks,lineto="left"==this.properties["chart.yaxispos"]?this.gutterLeft:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"];for(y=this.gutterTop;this.grapharea/2+this.gutterTop>y;y+=interval)this.grapharea/2+this.gutterTop>y&&(this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,Math.round(y)),this.context.lineTo(lineto,Math.round(y)));for(y=this.gutterTop+this.halfgrapharea+interval;this.grapharea+this.gutterTop>=y;y+=interval)this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,Math.round(y)),this.context.lineTo(lineto,Math.round(y))}else if("top"==this.properties["chart.xaxispos"]){var interval=this.grapharea/numyticks,lineto="left"==this.properties["chart.yaxispos"]?this.gutterLeft:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"];for(y=this.gutterTop+interval;this.grapharea+this.gutterTop>=y;y+=interval)this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,Math.round(y)),this.context.lineTo(lineto,Math.round(y));this.properties["chart.noxaxis"]&&0==this.properties["chart.noendytick"]&&(this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,this.gutterTop),this.context.lineTo(lineto,this.gutterTop))}else{var lineto="left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"];for(y=this.gutterTop;this.canvas.height-this.gutterBottom>y&&numyticks>counter;y+=(this.canvas.height-this.gutterTop-this.gutterBottom)/numyticks){this.context.moveTo(this.gutterLeft+adjustment,Math.round(y)),this.context.lineTo(lineto,Math.round(y));var counter=counter+1}}}else 0==this.properties["chart.noxaxis"]&&this.properties["chart.numxticks"]>0&&("left"==this.properties["chart.yaxispos"]?(this.context.moveTo(this.gutterLeft,"top"==this.properties["chart.xaxispos"]?this.gutterTop:this.canvas.height-this.gutterBottom),this.context.lineTo(this.gutterLeft,"top"==this.properties["chart.xaxispos"]?this.gutterTop-this.properties["chart.smallxticks"]:this.canvas.height-this.gutterBottom+this.properties["chart.smallxticks"])):(this.context.moveTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom),this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom+this.properties["chart.smallxticks"])));this.context.stroke()}},RGraph.Line.prototype.DrawLabels=function(){var ca=this.canvas,co=this.context,prop=this.properties;co.strokeStyle="black",co.fillStyle=this.properties["chart.text.color"],co.lineWidth=1,RGraph.NoShadow(this);var font=prop["chart.text.font"],text_size=prop["chart.text.size"],decimals=prop["chart.scale.decimals"],ymin=prop["chart.ymin"];if(prop["chart.ylabels"]&&null==prop["chart.ylabels.specific"]){var units_pre=prop["chart.units.pre"],units_post=prop["chart.units.post"],xpos="left"==prop["chart.yaxispos"]?this.gutterLeft-5:ca.width-this.gutterRight+5,align="left"==prop["chart.yaxispos"]?"right":"left",numYLabels=this.scale2.labels.length,bounding=!1,bgcolor=prop["chart.ylabels.inside"]?prop["chart.ylabels.inside.color"]:null;if(1==prop["chart.ylabels.inside"]&&"left"==align?(xpos-=10,align="right",bounding=!0):1==prop["chart.ylabels.inside"]&&"right"==align&&(xpos+=10,align="left",bounding=!0),"center"==prop["chart.xaxispos"]){for(var half=this.grapharea/2,i=0;this.scale2.labels.length>i;++i)RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+half-(i+1)/numYLabels*half,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:this.scale2.labels[i],tag:"scale"});for(var i=0;this.scale2.labels.length>i;++i)RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+half+(i+1)/numYLabels*half,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:"-"+this.scale2.labels[i],tag:"scale"});(1==prop["chart.noxaxis"]||0!=ymin)&&RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+half,text:prop["chart.units.pre"]+ymin.toFixed(decimals)+prop["chart.units.post"],bounding:bounding,boundingFill:bgcolor,valign:"center",halign:align,tag:"scale"})}else if("top"==this.properties["chart.xaxispos"]){var half=this.grapharea/2;if(prop["chart.scale.invert"])for(var i=0;this.scale2.labels.length>i;++i)RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+i/this.scale2.labels.length*this.grapharea,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:"-"+this.scale2.labels[this.scale2.labels.length-(i+1)],tag:"scale"});else for(var i=0;this.scale2.labels.length>i;++i)RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+(i+1)/numYLabels*this.grapharea,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:"-"+this.scale2.labels[i],tag:"scale"});(0!=prop["chart.ymin"]||prop["chart.noxaxis"]||prop["chart.scale.invert"])&&RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:prop["chart.scale.invert"]?this.canvas.height-this.gutterBottom:this.gutterTop,text:(0!=prop["chart.ymin"]?"-":"")+RGraph.number_format(this,this.properties["chart.ymin"].toFixed(decimals),units_pre,units_post),valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,tag:"scale"})}else{if(prop["chart.scale.invert"]){RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:RGraph.number_format(this,this.min.toFixed(prop["chart.scale.decimals"]),units_pre,units_post),tag:"scale"});for(var i=0;this.scale2.labels.length>i;++i)RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+(i+1)/this.scale2.labels.length*this.grapharea,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:this.scale2.labels[i],tag:"scale"})}else for(var i=0;this.scale2.labels.length>i;++i)RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:this.gutterTop+i/this.scale2.labels.length*this.grapharea,valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,text:this.scale2.labels[this.scale2.labels.length-(i+1)],tag:"scale"});(0!=prop["chart.ymin"]&&!prop["chart.scale.invert"]||prop["chart.noxaxis"])&&RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:prop["chart.scale.invert"]?this.gutterTop:this.canvas.height-this.gutterBottom,text:RGraph.number_format(this,prop["chart.ymin"].toFixed(prop["chart.scale.decimals"]),units_pre,units_post),valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,tag:"scale"})}1==prop["chart.noxaxis"]&&null==prop["chart.ymin"]&&"center"!=prop["chart.xaxispos"]&&0==prop["chart.noendytick"]&&RGraph.Text2(this,{font:font,size:text_size,x:xpos,y:"top"==this.properties["chart.xaxispos"]?this.gutterTop:this.canvas.height-this.gutterBottom,text:this.properties["chart.units.pre"]+0..toFixed(this.properties["chart.scale.decimals"])+this.properties["chart.units.post"],valign:"center",halign:align,bounding:bounding,boundingFill:bgcolor,tag:"scale"})}else if(this.properties["chart.ylabels"]&&"object"==typeof this.properties["chart.ylabels.specific"]){this.grapharea/this.properties["chart.ylabels.specific"].length;var halign="left"==this.properties["chart.yaxispos"]?"right":"left",bounding=!1,bgcolor=null,ymin=null!=this.properties["chart.ymin"]&&this.properties["chart.ymin"];if("left"==this.properties["chart.yaxispos"]){var x=this.gutterLeft-5;this.properties["chart.ylabels.inside"]&&(x+=10,halign="left",bounding=!0,bgcolor="rgba(255,255,255,0.5)")}else if("right"==this.properties["chart.yaxispos"]){var x=this.canvas.width-this.gutterRight+5;this.properties["chart.ylabels.inside"]&&(x-=10,halign="right",bounding=!0,bgcolor="rgba(255,255,255,0.5)")}if("center"==this.properties["chart.xaxispos"]){for(var i=0;this.properties["chart.ylabels.specific"].length>i;++i){var y=this.gutterTop+this.grapharea/(2*(this.properties["chart.ylabels.specific"].length-1))*i;if(ymin&&ymin>0){var y=this.grapharea/2/(this.properties["chart.ylabels.specific"].length-(ymin?1:0))*i;y+=this.gutterTop}RGraph.Text2(this,{font:font,size:text_size,x:x,y:y,text:this.properties["chart.ylabels.specific"][i]+"",valign:"center",halign:halign,bounding:bounding,boundingFill:bgcolor,tag:"ylabels.specific"})}for(var reversed_labels=RGraph.array_reverse(this.properties["chart.ylabels.specific"]),i=0;reversed_labels.length>i;++i){var y=this.grapharea/2+this.gutterTop+this.grapharea/(2*(reversed_labels.length-1))*i;RGraph.Text2(this,{font:font,size:text_size,x:x,y:y,text:0==i?"":reversed_labels[i]+"",valign:"center",halign:halign,bounding:bounding,boundingFill:bgcolor,tag:"ylabels.specific"})}}else if("top"==this.properties["chart.xaxispos"])for(var reversed_labels=RGraph.array_reverse(this.properties["chart.ylabels.specific"]),i=0;reversed_labels.length>i;++i){var y=this.grapharea/(reversed_labels.length-1)*i;y+=this.gutterTop,RGraph.Text2(this,{font:font,size:text_size,x:x,y:y,text:reversed_labels[i]+"",valign:"center",halign:halign,bounding:bounding,boundingFill:bgcolor,tag:"ylabels.specific"})}else for(var i=0;this.properties["chart.ylabels.specific"].length>i;++i){var y=this.gutterTop+this.grapharea/(this.properties["chart.ylabels.specific"].length-1)*i;RGraph.Text2(this,{font:font,size:text_size,x:x,y:y,text:this.properties["chart.ylabels.specific"][i]+"",valign:"center",halign:halign,bounding:bounding,boundingFill:bgcolor,tag:"ylabels.specific"})}}if(this.properties["chart.labels"]&&this.properties["chart.labels"].length>0){var yOffset=5,bordered=!1,bgcolor=null,angle=0,valign="top",halign="center";this.properties["chart.xlabels.inside"]&&(yOffset=-5,bordered=!0,bgcolor=this.properties["chart.xlabels.inside.color"],valign="bottom"),"top"==this.properties["chart.xaxispos"]&&(valign="bottom",yOffset+=2),"number"==typeof this.properties["chart.text.angle"]&&this.properties["chart.text.angle"]>0&&(angle=-1*this.properties["chart.text.angle"],valign="center",halign="right",yOffset=10,"top"==this.properties["chart.xaxispos"]&&(yOffset=10)),this.context.fillStyle=this.properties["chart.text.color"];var numLabels=this.properties["chart.labels"].length;for(i=0;numLabels>i;++i)if(this.properties["chart.labels"][i]){var labelX=(this.canvas.width-this.gutterLeft-this.gutterRight-2*this.properties["chart.hmargin"])/(numLabels-1)*i;labelX+=this.gutterLeft+this.properties["chart.hmargin"],this.properties["chart.labels"].length!=this.data[0].length&&(labelX=this.gutterLeft+this.properties["chart.hmargin"]+(this.canvas.width-this.gutterLeft-this.gutterRight-2*this.properties["chart.hmargin"])*(i/(this.properties["chart.labels"].length-1))),labelX||(labelX=this.gutterLeft+this.properties["chart.hmargin"]),"top"==this.properties["chart.xaxispos"]&&this.properties["chart.text.angle"]>0&&(halign="left"),0!=this.properties["chart.text.angle"]&&(halign="right"),RGraph.Text2(this,{font:font,size:text_size,x:labelX,y:"top"==this.properties["chart.xaxispos"]?this.gutterTop-yOffset-(this.properties["chart.xlabels.inside"]?-22:0):this.canvas.height-this.gutterBottom+yOffset,text:this.properties["chart.labels"][i]+"",valign:valign,halign:halign,bounding:bordered,boundingFill:bgcolor,angle:angle,tag:"labels"})}}this.context.stroke(),this.context.fill()},RGraph.Line.prototype.DrawLine=function(lineData,color,fill,linewidth,tickmarks,index){if(this.properties["chart.animation.unfold.y"]&&1!=this.properties["chart.animation.factor"])for(var i=0;lineData.length>i;++i)lineData[i]*=this.properties["chart.animation.factor"];var penUp=!1,yPos=null,xPos=0;this.context.lineWidth=1;var lineCoords=[];if(index>0)var prevLineCoords=this.coords2[index-1];var xInterval=(this.canvas.width-2*this.properties["chart.hmargin"]-this.gutterLeft-this.gutterRight)/(lineData.length-1);for(i=0;lineData.length>i;i++){var data_point=lineData[i],yPos=this.getYCoord(data_point);(null==lineData[i]||"bottom"==this.properties["chart.xaxispos"]&&lineData[i]<this.min&&!this.properties["chart.outofbounds"]||"center"==this.properties["chart.xaxispos"]&&lineData[i]<-1*this.max&&!this.properties["chart.outofbounds"])&&(yPos=null),this.context.lineCap="round",this.context.lineJoin="round",i>0?xPos+=xInterval:xPos=this.properties["chart.hmargin"]+this.gutterLeft,this.properties["chart.animation.unfold.x"]&&(xPos*=this.properties["chart.animation.factor"],this.properties["chart.gutter.left"]>xPos&&(xPos=this.properties["chart.gutter.left"])),this.coords.push([xPos,yPos]),lineCoords.push([xPos,yPos])}this.context.stroke(),this.coords2[index]=lineCoords,ISOLD&&this.properties["chart.shadow"]&&this.DrawIEShadow(lineCoords,this.context.shadowColor),this.context.beginPath(),this.context.strokeStyle="rgba(0,0,0,0)",fill&&(this.context.fillStyle=fill);var isStepped=this.properties["chart.stepped"],isFilled=this.properties["chart.filled"];if("top"==this.properties["chart.xaxispos"])var xAxisPos=this.gutterTop;else if("center"==this.properties["chart.xaxispos"])var xAxisPos=this.gutterTop+this.grapharea/2;else if("bottom"==this.properties["chart.xaxispos"])var xAxisPos=this.canvas.height-this.gutterBottom;for(var i=0;lineCoords.length>i;++i){xPos=lineCoords[i][0],yPos=lineCoords[i][1];var prevY=lineCoords[i-1]?lineCoords[i-1][1]:null,isLast=i+1==lineCoords.length;(this.gutterTop>prevY||prevY>this.canvas.height-this.gutterBottom)&&(penUp=!0),0==i||penUp||!yPos||!prevY||this.gutterTop>prevY?(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]?(this.context.moveTo(xPos+1,xAxisPos),"top"==this.properties["chart.xaxispos"]&&this.context.moveTo(xPos+1,xAxisPos),this.context.lineTo(xPos,yPos)):ISOLD&&null==yPos||this.context.moveTo(xPos+1,yPos),penUp=null==yPos?!0:!1):(isStepped&&this.context.lineTo(xPos,lineCoords[i-1][1]),yPos>=this.gutterTop&&this.canvas.height-this.gutterBottom>=yPos||this.properties["chart.outofbounds"]?(isLast&&this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&"right"==this.properties["chart.yaxispos"]&&(xPos-=1),isStepped&&isLast?isStepped&&isLast&&this.context.lineTo(xPos,yPos):(this.context.lineTo(xPos,yPos),isFilled&&lineCoords[i+1]&&null==lineCoords[i+1][1]&&this.context.lineTo(xPos,xAxisPos)),penUp=!1):penUp=!0)
}if(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&!this.properties["chart.curvy"]){if(this.properties["chart.fillstyle"],index>0&&this.properties["chart.filled.accumulative"]){this.context.lineTo(xPos,prevLineCoords?prevLineCoords[i-1][1]:this.canvas.height-this.gutterBottom-1+("center"==this.properties["chart.xaxispos"]?(this.canvas.height-this.gutterTop-this.gutterBottom)/2:0));for(var k=i-1;k>=0;--k)this.context.lineTo(0==k?prevLineCoords[k][0]+1:prevLineCoords[k][0],prevLineCoords[k][1])}else if("top"==this.properties["chart.xaxispos"])this.context.lineTo(xPos,this.properties["chart.gutter.top"]+1),this.context.lineTo(lineCoords[0][0],this.properties["chart.gutter.top"]+1);else if("number"==typeof lineCoords[i-1][1]){var yPosition="center"==this.properties["chart.xaxispos"]?(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop:this.canvas.height-this.gutterBottom;this.context.lineTo(xPos,yPosition),this.context.lineTo(lineCoords[0][0],yPosition)}this.context.fillStyle=fill,this.context.fill(),this.context.beginPath()}if(navigator.userAgent.match(/Chrome/)&&this.properties["chart.shadow"]&&this.properties["chart.chromefix"]&&this.properties["chart.shadow.blur"]>0)for(var i=lineCoords.length-1;i>=0;--i)"number"!=typeof lineCoords[i][1]||"object"==typeof lineCoords[i+1]&&"number"!=typeof lineCoords[i+1][1]?this.context.moveTo(lineCoords[i][0],lineCoords[i][1]):this.context.lineTo(lineCoords[i][0],lineCoords[i][1]);this.context.stroke(),this.properties["chart.backdrop"]&&this.DrawBackdrop(lineCoords,color),this.context.save(),this.context.beginPath(),this.context.rect(0,0,this.canvas.width*this.properties["chart.animation.trace.clip"],this.canvas.height),this.context.clip(),this.SetShadow(index),this.RedrawLine(lineCoords,color,linewidth),this.context.stroke(),RGraph.NoShadow(this);for(var i=0;lineCoords.length>i;++i)if(i=Number(i),this.context.strokeStyle=color,isStepped&&i==lineCoords.length-1&&this.context.beginPath(),"endcircle"!=tickmarks&&"endsquare"!=tickmarks&&"filledendsquare"!=tickmarks&&"endtick"!=tickmarks&&"endtriangle"!=tickmarks&&"arrow"!=tickmarks&&"filledarrow"!=tickmarks||0==i&&"arrow"!=tickmarks&&"filledarrow"!=tickmarks||i==lineCoords.length-1){var prevX=0>=i?null:lineCoords[i-1][0],prevY=0>=i?null:lineCoords[i-1][1];this.DrawTick(lineData,lineCoords[i][0],lineCoords[i][1],color,!1,prevX,prevY,tickmarks,i)}this.context.restore(),this.context.beginPath(),this.context.arc(this.canvas.width+5e4,this.canvas.height+5e4,2,0,6.38,1)},RGraph.Line.prototype.DrawTick=function(lineData,xPos,yPos,color,isShadow,prevX,prevY,tickmarks,index){if((!(null==yPos||yPos>this.canvas.height-this.gutterBottom||this.gutterTop>yPos)||this.properties["chart.outofbounds"])&&this.properties["chart.line.visible"]){this.context.beginPath();var offset=0;if(this.context.lineWidth=this.properties["chart.tickmarks.linewidth"]?this.properties["chart.tickmarks.linewidth"]:this.properties["chart.linewidth"],this.context.strokeStyle=isShadow?this.properties["chart.shadow.color"]:this.context.strokeStyle,this.context.fillStyle=isShadow?this.properties["chart.shadow.color"]:this.context.strokeStyle,"circle"==tickmarks||"filledcircle"==tickmarks||"endcircle"==tickmarks)("circle"==tickmarks||"filledcircle"==tickmarks||"endcircle"==tickmarks&&(0==index||index==lineData.length-1))&&(this.context.beginPath(),this.context.arc(xPos+offset,yPos+offset,this.properties["chart.ticksize"],0,360/(180/PI),!1),this.context.fillStyle="filledcircle"==tickmarks?isShadow?this.properties["chart.shadow.color"]:this.context.strokeStyle:isShadow?this.properties["chart.shadow.color"]:"white",this.context.stroke(),this.context.fill());else if("halftick"==tickmarks)this.context.beginPath(),this.context.moveTo(Math.round(xPos),yPos),this.context.lineTo(Math.round(xPos),yPos+this.properties["chart.ticksize"]),this.context.stroke();else if("tick"==tickmarks)this.context.beginPath(),this.context.moveTo(Math.round(xPos),yPos-this.properties["chart.ticksize"]),this.context.lineTo(Math.round(xPos),yPos+this.properties["chart.ticksize"]),this.context.stroke();else if("endtick"!=tickmarks||0!=index&&index!=lineData.length-1)if("cross"==tickmarks){this.context.beginPath();var ticksize=this.properties["chart.ticksize"];this.context.moveTo(xPos-ticksize,yPos-ticksize),this.context.lineTo(xPos+ticksize,yPos+ticksize),this.context.moveTo(xPos+ticksize,yPos-ticksize),this.context.lineTo(xPos-ticksize,yPos+ticksize),this.context.stroke()}else if("triangle"==tickmarks||"filledtriangle"==tickmarks||"endtriangle"==tickmarks&&(0==index||index==lineData.length-1))this.context.beginPath(),this.context.fillStyle="filledtriangle"==tickmarks?isShadow?this.properties["chart.shadow.color"]:this.context.strokeStyle:"white",this.context.moveTo(Math.round(xPos-this.properties["chart.ticksize"]),yPos+this.properties["chart.ticksize"]),this.context.lineTo(Math.round(xPos),yPos-this.properties["chart.ticksize"]),this.context.lineTo(Math.round(xPos+this.properties["chart.ticksize"]),yPos+this.properties["chart.ticksize"]),this.context.closePath(),this.context.stroke(),this.context.fill();else if("borderedcircle"==tickmarks||"dot"==tickmarks)this.context.lineWidth=1,this.context.strokeStyle=this.properties["chart.tickmarks.dot.color"],this.context.fillStyle=this.properties["chart.tickmarks.dot.color"],this.context.beginPath(),this.context.arc(xPos,yPos,this.properties["chart.ticksize"],0,360/(180/PI),!1),this.context.closePath(),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle=color,this.context.strokeStyle=color,this.context.arc(xPos,yPos,this.properties["chart.ticksize"]-2,0,360/(180/PI),!1),this.context.closePath(),this.context.fill(),this.context.stroke();else if("square"==tickmarks||"filledsquare"==tickmarks||"endsquare"==tickmarks&&(0==index||index==lineData.length-1)||"filledendsquare"==tickmarks&&(0==index||index==lineData.length-1))this.context.fillStyle="white",this.context.strokeStyle=this.context.strokeStyle,this.context.beginPath(),this.context.rect(Math.round(xPos-this.properties["chart.ticksize"]),Math.round(yPos-this.properties["chart.ticksize"]),2*this.properties["chart.ticksize"],2*this.properties["chart.ticksize"]),"filledsquare"==tickmarks||"filledendsquare"==tickmarks?(this.context.fillStyle=isShadow?this.properties["chart.shadow.color"]:this.context.strokeStyle,this.context.rect(Math.round(xPos-this.properties["chart.ticksize"]),Math.round(yPos-this.properties["chart.ticksize"]),2*this.properties["chart.ticksize"],2*this.properties["chart.ticksize"])):("square"==tickmarks||"endsquare"==tickmarks)&&(this.context.fillStyle=isShadow?this.properties["chart.shadow.color"]:"white",this.context.rect(Math.round(xPos-this.properties["chart.ticksize"]+1),Math.round(yPos-this.properties["chart.ticksize"]+1),2*this.properties["chart.ticksize"]-2,2*this.properties["chart.ticksize"]-2)),this.context.stroke(),this.context.fill();else if("filledarrow"==tickmarks){var x=Math.abs(xPos-prevX),y=Math.abs(yPos-prevY);if(prevY>yPos)var a=Math.atan(x/y)+1.57;else var a=Math.atan(y/x)+3.14;this.context.beginPath(),this.context.moveTo(Math.round(xPos),Math.round(yPos)),this.context.arc(Math.round(xPos),Math.round(yPos),7,a-.5,a+.5,!1),this.context.closePath(),this.context.stroke(),this.context.fill()}else if("arrow"==tickmarks){var x=Math.abs(xPos-prevX),y=Math.abs(yPos-prevY),orig_linewidth=this.context.lineWidth;if(prevY>yPos)var a=Math.atan(x/y)+1.57;else var a=Math.atan(y/x)+3.14;this.context.beginPath(),this.context.moveTo(Math.round(xPos),Math.round(yPos)),this.context.arc(Math.round(xPos),Math.round(yPos),7,a-.5-(document.all?.1:.01),a-.4,!1),this.context.moveTo(Math.round(xPos),Math.round(yPos)),this.context.arc(Math.round(xPos),Math.round(yPos),7,a+.5+(document.all?.1:.01),a+.5,!0),this.context.stroke(),this.context.fill(),this.context.lineWidth=orig_linewidth}else"function"==typeof tickmarks&&tickmarks(this,lineData,lineData[index],index,xPos,yPos,color,prevX,prevY);else this.context.beginPath(),this.context.moveTo(Math.round(xPos),yPos-this.properties["chart.ticksize"]),this.context.lineTo(Math.round(xPos),yPos+this.properties["chart.ticksize"]),this.context.stroke()}},RGraph.Line.prototype.DrawRange=function(){if(this.properties["chart.filled.range"]&&this.properties["chart.filled"]){this.context.beginPath(),this.context.fillStyle=this.properties["chart.fillstyle"],this.context.lineWidth=1;for(var len=this.coords.length/2,i=0;len>i;++i)0==i?this.context.moveTo(this.coords[i][0],this.coords[i][1]):this.context.lineTo(this.coords[i][0],this.coords[i][1]);for(var i=this.coords.length-1;i>=len;--i)this.context.lineTo(this.coords[i][0],this.coords[i][1]);this.context.fill()}},RGraph.Line.prototype.RedrawLine=function(coords,color,linewidth){if(!this.properties["chart.noredraw"]){if(this.context.strokeStyle="object"==typeof color&&color&&-1==(""+color).indexOf("CanvasGradient")?color[0]:color,this.context.lineWidth=linewidth,this.properties["chart.line.visible"]||(this.context.strokeStyle="rgba(0,0,0,0)"),!ISOLD&&(this.properties["chart.curvy"]||this.properties["chart.spline"]))return this.DrawCurvyLine(coords,this.properties["chart.line.visible"]?color:"rgba(0,0,0,0)",linewidth),void 0;this.context.beginPath();for(var len=coords.length,width=this.canvas.width,height=this.canvas.height,penUp=!1,i=0;len>i;++i){coords[i][0];var yPos=coords[i][1];if(i>0)var prevX=coords[i-1][0],prevY=coords[i-1][1];!(0==i&&coords[i]||this.gutterTop>yPos||this.gutterTop>prevY||yPos>height-this.gutterBottom||i>0&&prevX>width-this.gutterRight||i>0&&prevY>height-this.gutterBottom||null==prevY||1==penUp)||this.properties["chart.outofbounds"]&&null!=yPos&&null!=prevY?(this.properties["chart.stepped"]&&i>0&&this.context.lineTo(coords[i][0],coords[i-1][1]),this.context.lineTo(coords[i][0],coords[i][1]),penUp=!1):(ISOLD&&null==yPos||this.context.moveTo(coords[i][0],coords[i][1]),penUp=!1)}if(this.properties["chart.colors.alternate"]&&"object"==typeof color&&color[0]&&color[1])for(var i=1;len>i;++i){var prevX=coords[i-1][0],prevY=coords[i-1][1];null!=prevY&&null!=coords[i][1]&&(this.context.beginPath(),this.context.strokeStyle=color[prevY>coords[i][1]?0:1],this.context.lineWidth=this.properties["chart.linewidth"],this.context.moveTo(prevX,prevY),this.context.lineTo(coords[i][0],coords[i][1]),this.context.stroke())}}},RGraph.Line.prototype.DrawIEShadow=function(coords,color){var offsetx=this.properties["chart.shadow.offsetx"],offsety=this.properties["chart.shadow.offsety"];this.context.lineWidth=this.properties["chart.linewidth"],this.context.strokeStyle=color,this.context.beginPath();for(var i=0;coords.length>i;++i)0==i?this.context.moveTo(coords[i][0]+offsetx,coords[i][1]+offsety):this.context.lineTo(coords[i][0]+offsetx,coords[i][1]+offsety);this.context.stroke()},RGraph.Line.prototype.DrawBackdrop=function(coords,color){var size=this.properties["chart.backdrop.size"];this.context.lineWidth=size,this.context.globalAlpha=this.properties["chart.backdrop.alpha"],this.context.strokeStyle=color;var yCoords=[];if(this.context.beginPath(),this.properties["chart.curvy"]&&!ISOLD){for(var i=0;coords.length>i;++i)yCoords.push(coords[i][1]);this.DrawSpline(this.context,yCoords,color)}else{this.context.moveTo(coords[0][0],coords[0][1]);for(var j=1;coords.length>j;++j)this.context.lineTo(coords[j][0],coords[j][1])}this.context.stroke(),this.context.globalAlpha=1,RGraph.NoShadow(this)},RGraph.Line.prototype.GetLineWidth=function(i){var linewidth=this.properties["chart.linewidth"];return"number"==typeof linewidth?linewidth:"object"==typeof linewidth?linewidth[i]?linewidth[i]:linewidth[0]:void 0},RGraph.Line.prototype.getShape=RGraph.Line.prototype.getPoint=function(e){e.target;var obj=this;obj.context;var mouseXY=RGraph.getMouseXY(e),mouseX=mouseXY[0],mouseY=mouseXY[1];arguments[1]&&(obj=arguments[1]);for(var i=0;obj.coords.length>i;++i){var x=obj.coords[i][0],y=obj.coords[i][1];if(x+obj.properties["chart.tooltips.hotspot.size"]>=mouseX&&mouseX>=x-obj.properties["chart.tooltips.hotspot.size"]&&y+obj.properties["chart.tooltips.hotspot.size"]>=mouseY&&mouseY>=y-obj.properties["chart.tooltips.hotspot.size"]){if(RGraph.parseTooltipText)var tooltip=RGraph.parseTooltipText(this.properties["chart.tooltips"],i);for(var dataset=0,idx=i;idx+1>this.data[dataset].length;)idx-=this.data[dataset].length,dataset++;return{0:obj,1:x,2:y,3:i,object:obj,x:x,y:y,index:i,tooltip:tooltip,dataset:dataset,index_adjusted:idx}}if(1==obj.properties["chart.tooltips.hotspot.xonly"]&&x+obj.properties["chart.tooltips.hotspot.size"]>=mouseX&&mouseX>=x-obj.properties["chart.tooltips.hotspot.size"]){var tooltip=RGraph.parseTooltipText(this.properties["chart.tooltips"],i);return{0:obj,1:x,2:y,3:i,object:obj,x:x,y:y,index:i,tooltip:tooltip}}}},RGraph.Line.prototype.DrawAboveLabels=function(){var context=this.context,size=this.properties["chart.labels.above.size"],font=this.properties["chart.text.font"],units_pre=this.properties["chart.units.pre"],units_post=this.properties["chart.units.post"];context.beginPath();for(var i=0;this.coords.length>i;++i){var coords=this.coords[i];RGraph.Text2(this,{font:font,size:size,x:coords[0],y:coords[1]-5-size,text:RGraph.number_format(this,this.data_arr[i],units_pre,units_post),valign:"center",halign:"center",bounding:!0,boundingFill:"white",tag:"labels.above"})}context.fill()},RGraph.Line.prototype.DrawCurvyLine=function(coords,color){if(!ISOLD){for(var yCoords=[],i=0;coords.length>i;++i)yCoords.push(coords[i][1]);this.properties["chart.filled"]&&(this.context.beginPath(),this.context.moveTo(coords[0][0],this.canvas.height-this.gutterBottom),this.DrawSpline(this.context,yCoords,color),this.context.lineTo(coords[coords.length-1][0],this.canvas.height-this.gutterBottom),this.context.fill()),this.context.beginPath(),this.DrawSpline(this.context,yCoords,color),this.context.stroke()}},RGraph.Line.prototype.getValue=function(arg){if(2==arg.length){arg[0];var mouseY=arg[1]}else{var mouseCoords=RGraph.getMouseXY(arg);mouseCoords[0];var mouseY=mouseCoords[1]}var obj=this,xaxispos=this.properties["chart.xaxispos"];if(obj.properties["chart.gutter.top"]>mouseY)return"bottom"==xaxispos||"center"==xaxispos?this.max:this.min;if(mouseY>obj.canvas.height-obj.properties["chart.gutter.bottom"])return"bottom"==xaxispos?this.min:this.max;if("center"==this.properties["chart.xaxispos"]){var value=(obj.grapharea/2-(mouseY-obj.properties["chart.gutter.top"]))/obj.grapharea*(obj.max-obj.min);return value*=2,value>0?value+=this.min:value-=this.min,value}if("top"==this.properties["chart.xaxispos"]){var value=(obj.grapharea-(mouseY-obj.properties["chart.gutter.top"]))/obj.grapharea*(obj.max-obj.min);return value=-1*Math.abs(obj.max-value)}var value=(obj.grapharea-(mouseY-obj.properties["chart.gutter.top"]))/obj.grapharea*(obj.max-obj.min);return value+=obj.min},RGraph.Line.prototype.Highlight=function(shape){this.properties["chart.tooltips.highlight"]&&RGraph.Highlight.Point(this,shape)},RGraph.Line.prototype.getObjectByXY=function(e){var mouseXY=RGraph.getMouseXY(e);return mouseXY[0]>this.properties["chart.gutter.left"]-5&&mouseXY[0]<this.canvas.width-this.properties["chart.gutter.right"]+5&&mouseXY[1]>this.properties["chart.gutter.top"]-5&&mouseXY[1]<this.canvas.height-this.properties["chart.gutter.bottom"]+5?this:void 0},RGraph.Line.prototype.Adjusting_mousemove=function(e){if(RGraph.Registry.Get("chart.adjusting")&&RGraph.Registry.Get("chart.adjusting").uid==this.uid){var value=Number(this.getValue(e)),shape=RGraph.Registry.Get("chart.adjusting.shape");shape&&(RGraph.Registry.Set("chart.adjusting.shape",shape),this.original_data[shape.dataset][shape.index_adjusted]=Number(value),RGraph.RedrawCanvas(e.target),RGraph.FireCustomEvent(this,"onadjust"))}},RGraph.Line.prototype.getYCoord=function(value){if("number"!=typeof value)return null;var y,xaxispos=this.properties["chart.xaxispos"];if("top"==xaxispos)0>value&&(value=Math.abs(value)),y=(value-this.min)/(this.max-this.min)*this.grapharea,this.properties["chart.scale.invert"]&&(y=this.grapharea-y),y+=this.gutterTop;else if("center"==xaxispos)y=(value-this.min)/(this.max-this.min)*(this.grapharea/2),y=this.grapharea/2-y,y+=this.gutterTop;else{if(this.min>value||value>this.max)return null;y=(value-this.min)/(this.max-this.min)*this.grapharea,this.properties["chart.scale.invert"]&&(y=this.grapharea-y),y=this.canvas.height-this.gutterBottom-y}return y},RGraph.Line.prototype.positionTooltip=function(obj,x,y,tooltip){var coordX=obj.coords[tooltip.__index__][0];obj.coords[tooltip.__index__][1];var canvasXY=RGraph.getCanvasXY(obj.canvas);obj.properties["chart.gutter.left"],obj.properties["chart.gutter.top"];var width=tooltip.offsetWidth;tooltip.style.left=0,tooltip.style.top=parseInt(tooltip.style.top)-9+"px",tooltip.style.overflow="";var img=new Image;img.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",img.style.position="absolute",img.id="__rgraph_tooltip_pointer__",img.style.top=tooltip.offsetHeight-2+"px",tooltip.appendChild(img),10>canvasXY[0]+coordX-width/2?(tooltip.style.left=canvasXY[0]+coordX-.2*width+"px",img.style.left=.2*width-8.5+"px"):canvasXY[0]+coordX+width/2>document.body.offsetWidth?(tooltip.style.left=canvasXY[0]+coordX-.8*width+"px",img.style.left=.8*width-8.5+"px"):(tooltip.style.left=canvasXY[0]+coordX-.5*width+"px",img.style.left=.5*width-8.5+"px")},RGraph.Line.prototype.DrawSpline=function(context,coords,color){function Spline(t,P0,P1,P2,P3){return.5*(2*P1+(0-P0+P2)*t+((2*P0-5*P1+4*P2-P3)*t*t+(0-P0+3*P1-3*P2+P3)*t*t*t))}var co=context,ca=co.canvas,prop=this.properties,xCoords=[],gutterLeft=prop["chart.gutter.left"],gutterRight=prop["chart.gutter.right"],hmargin=prop["chart.hmargin"],interval=(ca.width-(gutterLeft+gutterRight)-2*hmargin)/(coords.length-1);this.context.strokeStyle=color;for(var P=[coords[0]],i=0;coords.length>i;++i)P.push(coords[i]);P.push(coords[coords.length-1]+(coords[coords.length-1]-coords[coords.length-2]));for(var j=1;P.length-2>j;++j)for(var t=0;10>t;++t){var yCoord=Spline(t/10,P[j-1],P[j],P[j+1],P[j+2]);xCoords.push((j-1)*interval+t*(interval/10)+gutterLeft+hmargin),co.lineTo(xCoords[xCoords.length-1],yCoord)}co.lineTo((j-1)*interval+gutterLeft+hmargin,P[j])},RGraph.Line.prototype.parseColors=function(){for(var i=0;this.properties["chart.colors"].length>i;++i)"object"==typeof this.properties["chart.colors"][i]&&this.properties["chart.colors"][i][0]&&this.properties["chart.colors"][i][1]?(this.properties["chart.colors"][i][0]=this.parseSingleColorForGradient(this.properties["chart.colors"][i][0]),this.properties["chart.colors"][i][1]=this.parseSingleColorForGradient(this.properties["chart.colors"][i][1])):this.properties["chart.colors"][i]=this.parseSingleColorForGradient(this.properties["chart.colors"][i]);if(this.properties["chart.fillstyle"])if("string"==typeof this.properties["chart.fillstyle"])this.properties["chart.fillstyle"]=this.parseSingleColorForGradient(this.properties["chart.fillstyle"],"vertical");else for(var i=0;this.properties["chart.fillstyle"].length>i;++i)this.properties["chart.fillstyle"][i]=this.parseSingleColorForGradient(this.properties["chart.fillstyle"][i],"vertical");if(!RGraph.is_null(this.properties["chart.key.colors"]))for(var i=0;this.properties["chart.key.colors"].length>i;++i)this.properties["chart.key.colors"][i]=this.parseSingleColorForGradient(this.properties["chart.key.colors"][i]);for(var properties=["chart.background.barcolor1","chart.background.barcolor2","chart.background.grid.color","chart.text.color","chart.crosshairs.color","chart.annotate.color","chart.title.color","chart.title.yaxis.color","chart.key.background","chart.axis.color","chart.highlight.fill"],i=0;properties.length>i;++i)this.properties[properties[i]]=this.parseSingleColorForGradient(this.properties[properties[i]])},RGraph.Line.prototype.parseSingleColorForGradient=function(color){var canvas=this.canvas,context=this.context;if(!color||"string"!=typeof color)return color;var dir="string"==typeof arguments[1]?arguments[1]:"horizontal";if(color.match(/^gradient\((.*)\)$/i)){var parts=RegExp.$1.split(":");if("horizontal"==dir)var grad=context.createLinearGradient(0,0,canvas.width,0);else var grad=context.createLinearGradient(0,0,0,canvas.height);var diff=1/(parts.length-1);grad.addColorStop(0,RGraph.trim(parts[0]));for(var j=1;parts.length>j;++j)grad.addColorStop(j*diff,RGraph.trim(parts[j]))}return grad?grad:color},RGraph.Line.prototype.SetShadow=function(i){if(this.properties["chart.shadow"]){var shadowColor=this.properties["chart.shadow.color"];"object"==typeof shadowColor&&shadowColor[i-1]?this.context.shadowColor=shadowColor[i]:"object"==typeof shadowColor?this.context.shadowColor=shadowColor[0]:"string"==typeof shadowColor&&(this.context.shadowColor=shadowColor),this.context.shadowBlur=this.properties["chart.shadow.blur"],this.context.shadowOffsetX=this.properties["chart.shadow.offsetx"],this.context.shadowOffsetY=this.properties["chart.shadow.offsety"]}};